#!/usr/bin/env bash
# Flush Redis cache keys matching 'cache:*' pattern
# Usage: flush-redis-cache <redis-url>
#
# Example:
#   $ flush-redis-cache redis://localhost:6379

set -e

if [[ -z "$1" ]]; then
    echo "Error: Redis URL is required" >&2
    echo "Usage: flush-redis-cache <redis-url>" >&2
    exit 1
fi

REDIS_URL="$1"

redis-cli -u "$REDIS_URL" KEYS "cache:*" | xargs redis-cli -u "$REDIS_URL" DEL

echo "Cache keys deleted successfully"
